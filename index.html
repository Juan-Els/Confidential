<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Noxcode Generator v2.1 - Legacy</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');
    
    body {
      background: linear-gradient(135deg, #0a0a0a 0%, #1a0a0a 50%, #0a0a0a 100%);
      color: #c0c0c0;
      font-family: 'VT323', 'Courier New', monospace;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
      box-sizing: border-box;
      position: relative;
      overflow-x: hidden;
    }

    /* Efecto de l√≠neas de escaneo retro */
    body::before {
      content: '';
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0, 255, 0, 0.03) 2px,
        rgba(0, 255, 0, 0.03) 4px
      );
      pointer-events: none;
      z-index: 1;
    }

    /* Efecto de parpadeo ocasional */
    @keyframes flicker {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.8; }
    }

    .container {
      background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
      border: 2px solid #333;
      border-top: 2px solid #555;
      border-left: 2px solid #555;
      padding: 2.5rem;
      border-radius: 8px;
      width: 90%;
      max-width: 450px;
      box-shadow: 
        0 0 20px rgba(255, 0, 0, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.1),
        inset 0 -1px 0 rgba(0, 0, 0, 0.5);
      position: relative;
      z-index: 2;
      animation: flicker 8s infinite;
    }

    h1 {
      font-size: 2rem;
      margin-bottom: 1.5rem;
      color: #ff6666;
      text-shadow: 0 0 10px rgba(255, 102, 102, 0.5);
      text-align: center;
      letter-spacing: 2px;
    }

    .version-info {
      text-align: center;
      font-size: 0.9rem;
      color: #666;
      margin-bottom: 1.5rem;
      border-bottom: 1px solid #333;
      padding-bottom: 1rem;
    }



    .form-group {
      margin-bottom: 1.5rem;
    }

    label {
      display: block;
      margin-bottom: 0.5rem;
      color: #aaa;
      font-size: 1.1rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    input[type="number"] {
      width: 100%;
      padding: 0.8rem;
      background: linear-gradient(145deg, #111, #000);
      color: #f0f0f0;
      border: 2px solid #333;
      border-radius: 4px;
      font-family: 'VT323', monospace;
      font-size: 1.2rem;
      box-sizing: border-box;
      transition: all 0.3s ease;
    }

    input[type="number"]:focus {
      border-color: #ff4d4d;
      box-shadow: 0 0 10px rgba(255, 77, 77, 0.3);
      outline: none;
    }

    .checkbox-group {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
      margin: 1.5rem 0;
    }

    .checkbox-item {
      display: flex;
      align-items: center;
      cursor: pointer;
      padding: 0.5rem;
      border-radius: 4px;
      transition: background-color 0.3s ease;
    }

    .checkbox-item:hover {
      background-color: rgba(255, 77, 77, 0.1);
    }

    input[type="checkbox"] {
      margin-right: 1rem;
      transform: scale(1.2);
      accent-color: #ff4d4d;
    }

    .checkbox-label {
      color: #ccc;
      font-size: 1.1rem;
      user-select: none;
    }

    .generate-btn {
      width: 100%;
      margin-top: 1.5rem;
      padding: 1rem 2rem;
      background: linear-gradient(145deg, #ff4d4d, #cc0000);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-family: 'VT323', monospace;
      font-size: 1.3rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .generate-btn:hover {
      background: linear-gradient(145deg, #ff6666, #ff0000);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }

    .generate-btn:active {
      transform: translateY(0);
    }

    .output {
      margin-top: 1.5rem;
      background: linear-gradient(145deg, #222, #111);
      padding: 1rem;
      border: 2px solid #444;
      border-radius: 6px;
      word-wrap: break-word;
      font-family: 'Courier New', monospace;
      font-size: 1.1rem;
      min-height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .output:hover {
      border-color: #ff4d4d;
      box-shadow: 0 0 10px rgba(255, 77, 77, 0.3);
    }

    .output.copied {
      border-color: #00ff00;
      box-shadow: 0 0 10px rgba(0, 255, 0, 0.3);
    }

    .copy-notification {
      position: absolute;
      top: -30px;
      right: 0;
      background: #00ff00;
      color: #000;
      padding: 0.3rem 0.8rem;
      border-radius: 4px;
      font-size: 0.9rem;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .copy-notification.show {
      opacity: 1;
    }

    .strength-meter {
      margin-top: 1rem;
      height: 8px;
      background: #333;
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .strength-fill {
      height: 100%;
      transition: all 0.5s ease;
      border-radius: 4px;
    }

    .strength-text {
      margin-top: 0.5rem;
      text-align: center;
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .security-analysis {
      margin-top: 2rem;
      background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
      border: 2px solid #333;
      border-radius: 8px;
      padding: 1.5rem;
      display: none;
    }

    .security-analysis.show {
      display: block;
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .analysis-header {
      text-align: center;
      margin-bottom: 1.5rem;
      color: #ff6666;
      font-size: 1.2rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      border-bottom: 1px solid #333;
      padding-bottom: 0.8rem;
    }

    .attack-methods {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1rem;
    }

    .attack-method {
      background: linear-gradient(145deg, #222, #111);
      border: 1px solid #444;
      border-radius: 6px;
      padding: 1rem;
      transition: all 0.3s ease;
    }

    .attack-method:hover {
      border-color: #ff4d4d;
      box-shadow: 0 0 10px rgba(255, 77, 77, 0.2);
    }

    .method-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.8rem;
    }

    .method-name {
      color: #ccc;
      font-size: 1rem;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .method-icon {
      font-size: 1.2rem;
    }

    .time-estimate {
      font-size: 1.1rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .time-instant { color: #ff0000; }
    .time-seconds { color: #ff6600; }
    .time-minutes { color: #ffaa00; }
    .time-hours { color: #ffff00; }
    .time-days { color: #88ff00; }
    .time-years { color: #00ff00; }
    .time-centuries { color: #00ffff; }

    .method-description {
      font-size: 0.9rem;
      color: #999;
      line-height: 1.4;
    }

    .overall-rating {
      margin-top: 1.5rem;
      text-align: center;
      padding: 1rem;
      background: linear-gradient(145deg, #333, #222);
      border-radius: 6px;
      border: 2px solid #444;
    }

    .rating-title {
      color: #ff6666;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .rating-score {
      font-size: 2rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .rating-description {
      font-size: 0.9rem;
      color: #aaa;
    }

    .password-input-section {
      margin-top: 2rem;
      padding: 1.5rem;
      background: linear-gradient(145deg, #1a1a1a, #0f0f0f);
      border: 2px solid #333;
      border-radius: 8px;
    }

    .password-input-header {
      text-align: center;
      color: #ff6666;
      font-size: 1.2rem;
      margin-bottom: 1rem;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    .password-test-input {
      width: 100%;
      padding: 0.8rem;
      background: linear-gradient(145deg, #111, #000);
      color: #f0f0f0;
      border: 2px solid #333;
      border-radius: 4px;
      font-family: 'VT323', monospace;
      font-size: 1.2rem;
      box-sizing: border-box;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
    }

    .password-test-input:focus {
      border-color: #ff4d4d;
      box-shadow: 0 0 10px rgba(255, 77, 77, 0.3);
      outline: none;
    }

    .analyze-btn {
      width: 100%;
      padding: 1rem 2rem;
      background: linear-gradient(145deg, #ff4d4d, #cc0000);
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-family: 'VT323', monospace;
      font-size: 1.3rem;
      text-transform: uppercase;
      letter-spacing: 2px;
      transition: all 0.3s ease;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .analyze-btn:hover {
      background: linear-gradient(145deg, #ff6666, #ff0000);
      transform: translateY(-2px);
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.4);
    }

    .footer {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #666;
      text-align: center;
      border-top: 1px solid #333;
      padding-top: 1rem;
    }

    .discontinued {
      margin-top: 1rem;
      font-style: italic;
      font-size: 1rem;
      color: #ff9999;
      text-align: center;
      background: rgba(255, 0, 0, 0.1);
      padding: 0.8rem;
      border-radius: 4px;
      border: 1px solid rgba(255, 0, 0, 0.3);
    }

    .legacy-warning {
      background: rgba(255, 165, 0, 0.1);
      border: 1px solid rgba(255, 165, 0, 0.3);
      color: #ffaa00;
      padding: 0.8rem;
      border-radius: 4px;
      margin-bottom: 1rem;
      text-align: center;
      font-size: 0.9rem;
    }

    #hidden-login {
      display: none;
      margin-top: 1rem;
      padding: 0.8rem;
      background: linear-gradient(145deg, #111, #000);
      color: #f0f0f0;
      border: 2px solid #333;
      border-radius: 4px;
      font-family: 'VT323', monospace;
      font-size: 1.1rem;
      width: 100%;
      box-sizing: border-box;
    }

    #logo {
      display: none;
    }

    /* Prevenir selecci√≥n de textos espec√≠ficos */
    .no-select {
      user-select: none;
      -webkit-user-select: none;
      -moz-user-select: none;
      -ms-user-select: none;
      -webkit-touch-callout: none;
      -webkit-tap-highlight-color: transparent;
    }

    h1, .version-info, #buildNumber {
      user-select: none !important;
      -webkit-user-select: none !important;
      -moz-user-select: none !important;
      -ms-user-select: none !important;
      -webkit-touch-callout: none !important;
      -webkit-tap-highlight-color: transparent !important;
    }

    /* Efectos de glitch ocasionales */
    @keyframes glitch {
      0% { transform: translateX(-50%); }
      20% { transform: translateX(-50%) translateX(2px); }
      40% { transform: translateX(-50%) translateX(-2px); }
      60% { transform: translateX(-50%) translateX(1px); }
      80% { transform: translateX(-50%) translateX(-1px); }
      100% { transform: translateX(-50%); }
    }

    .glitch {
      animation: glitch 0.3s ease-in-out;
    }

    /* Responsive */
    @media (max-width: 480px) {
      .container {
        padding: 1.5rem;
        margin: 10px;
      }
      
      h1 {
        font-size: 1.5rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <img id="logo" src="lock-triangle-red.png" alt="">
    <h1 style="user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;">Noxcode Generator</h1>
    
    <div class="version-info" style="user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;">
      <span style="user-select: none;">Version 2.1.3 Beta | </span><span id="buildNumber" style="user-select: none; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none;">Build 20210415</span><span style="user-select: none;"> | Legacy Mode</span>
    </div>

    <div class="legacy-warning">
      ‚ö†Ô∏è LEGACY SOFTWARE - No longer maintained or supported
    </div>

    <div class="form-group">
      <label for="length">Password Length:</label>
      <input type="number" id="length" min="4" max="40" value="16">
    </div>

    <div class="checkbox-group">
      <div class="checkbox-item">
        <input type="checkbox" id="symbols">
        <label class="checkbox-label" for="symbols">Include Special Characters (!@#$%^&*)</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="numbers" checked>
        <label class="checkbox-label" for="numbers">Include Numbers (0-9)</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="uppercase" checked>
        <label class="checkbox-label" for="uppercase">Include Uppercase Letters</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="lowercase" checked>
        <label class="checkbox-label" for="lowercase">Include Lowercase Letters</label>
      </div>
      <div class="checkbox-item">
        <input type="checkbox" id="no-ambiguous">
        <label class="checkbox-label" for="no-ambiguous">Avoid Ambiguous Characters (0,O,l,1,I)</label>
      </div>
    </div>

    <button class="generate-btn" onclick="generatePassword()">Generate Password</button>

    <div class="output" id="password-output" onclick="copyToClipboard()" title="Click to copy">
      <span style="color: #666;">Click "Generate Password" to create a secure password</span>
      <div class="copy-notification" id="copyNotification">Copied!</div>
    </div>

    <div class="strength-meter">
      <div class="strength-fill" id="strengthFill"></div>
    </div>
    <div class="strength-text" id="strengthText">Password Strength: Unknown</div>

    <!-- Secci√≥n de An√°lisis de Seguridad -->
    <div class="password-input-section">
      <div class="password-input-header">üîç Security Analysis Tool</div>
      <input type="text" class="password-test-input" id="passwordTestInput" placeholder="Enter any password to analyze its security...">
      <button class="analyze-btn" onclick="analyzePasswordSecurity()">Analyze Security</button>
    </div>

    <div class="security-analysis" id="securityAnalysis">
      <div class="analysis-header">üõ°Ô∏è Security Analysis Report</div>
      
      <div class="attack-methods" id="attackMethods">
        <!-- Los m√©todos de ataque se generar√°n din√°micamente -->
      </div>

      <div class="overall-rating" id="overallRating">
        <div class="rating-title">Overall Security Rating</div>
        <div class="rating-score" id="ratingScore">-</div>
        <div class="rating-description" id="ratingDescription">Enter a password to analyze</div>
      </div>
    </div>

    <input type="password" id="hidden-login" placeholder="Enter legacy access code...">

    <div class="discontinued">
      üö´ PROJECT DISCONTINUED - Last update: April 15, 2021<br>
      No security patches or updates will be provided
    </div>
    
    <div class="footer">
      Original CLI version never released | AES-256 encryption planned but never implemented<br>
      <small>¬© 2019-2021 Noxcode Labs - All rights reserved | Contact: dev@noxcode.legacy (inactive)</small>
    </div>
  </div>

  <script>
    // Variables globales
    let buildClickCount = 0;
    let buildClickTimer = null;
    let lastGeneratedPassword = '';

    // Funci√≥n mejorada para generar contrase√±as
    function generatePassword() {
      const length = parseInt(document.getElementById('length').value);
      const useSymbols = document.getElementById('symbols').checked;
      const useNumbers = document.getElementById('numbers').checked;
      const useUppercase = document.getElementById('uppercase').checked;
      const useLowercase = document.getElementById('lowercase').checked;
      const noAmbiguous = document.getElementById('no-ambiguous').checked;

      // Validaci√≥n de entrada
      if (length < 4 || length > 40) {
        alert('Password length must be between 4 and 40 characters');
        return;
      }

      if (!useSymbols && !useNumbers && !useUppercase && !useLowercase) {
        alert('At least one character type must be selected');
        return;
      }

      // Construcci√≥n del conjunto de caracteres
      let charset = "";
      let requiredChars = [];

      if (useLowercase) {
        const lowercase = noAmbiguous ? "abcdefghjkmnpqrstuvwxyz" : "abcdefghijklmnopqrstuvwxyz";
        charset += lowercase;
        requiredChars.push(lowercase[Math.floor(Math.random() * lowercase.length)]);
      }

      if (useUppercase) {
        const uppercase = noAmbiguous ? "ABCDEFGHJKMNPQRSTUVWXYZ" : "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        charset += uppercase;
        requiredChars.push(uppercase[Math.floor(Math.random() * uppercase.length)]);
      }

      if (useNumbers) {
        const numbers = noAmbiguous ? "23456789" : "0123456789";
        charset += numbers;
        requiredChars.push(numbers[Math.floor(Math.random() * numbers.length)]);
      }

      if (useSymbols) {
        const symbols = "!@#$%^&*()-_=+[]{}|;:,.<>?";
        charset += symbols;
        requiredChars.push(symbols[Math.floor(Math.random() * symbols.length)]);
      }

      // Generar contrase√±a
      let password = "";
      
      // Asegurar que al menos un car√°cter de cada tipo seleccionado est√© presente
      for (let i = 0; i < requiredChars.length && i < length; i++) {
        password += requiredChars[i];
      }

      // Completar el resto de la contrase√±a
      for (let i = password.length; i < length; i++) {
        password += charset.charAt(Math.floor(Math.random() * charset.length));
      }

      // Mezclar la contrase√±a para evitar patrones predecibles
      password = password.split('').sort(() => Math.random() - 0.5).join('');

      lastGeneratedPassword = password;
      document.getElementById('password-output').innerHTML = password;

      // Calcular y mostrar la fuerza de la contrase√±a
      updatePasswordStrength(password, charset.length);

      // Condici√≥n secreta mejorada para mostrar login oculto
      if (length === 17 && useSymbols && !noAmbiguous && useNumbers && useUppercase) {
        document.getElementById('hidden-login').style.display = 'block';
        // Efecto de glitch en el logo
        document.getElementById('logo').classList.add('glitch');
        setTimeout(() => {
          document.getElementById('logo').classList.remove('glitch');
        }, 300);
      } else {
        document.getElementById('hidden-login').style.display = 'none';
      }

      // Efecto visual en el bot√≥n
      const btn = document.querySelector('.generate-btn');
      btn.style.background = 'linear-gradient(145deg, #00ff00, #008800)';
      setTimeout(() => {
        btn.style.background = 'linear-gradient(145deg, #ff4d4d, #cc0000)';
      }, 200);
    }

    // Funci√≥n para calcular la fuerza de la contrase√±a
    function updatePasswordStrength(password, charsetSize) {
      const length = password.length;
      const entropy = length * Math.log2(charsetSize);
      
      let strength = 0;
      let strengthText = '';
      let color = '';

      if (entropy < 30) {
        strength = 20;
        strengthText = 'Very Weak';
        color = '#ff0000';
      } else if (entropy < 50) {
        strength = 40;
        strengthText = 'Weak';
        color = '#ff6600';
      } else if (entropy < 70) {
        strength = 60;
        strengthText = 'Fair';
        color = '#ffaa00';
      } else if (entropy < 90) {
        strength = 80;
        strengthText = 'Strong';
        color = '#88ff00';
      } else {
        strength = 100;
        strengthText = 'Very Strong';
        color = '#00ff00';
      }

      document.getElementById('strengthFill').style.width = strength + '%';
      document.getElementById('strengthFill').style.background = color;
      document.getElementById('strengthText').textContent = `Password Strength: ${strengthText} (${Math.round(entropy)} bits)`;
      document.getElementById('strengthText').style.color = color;
    }

    // Funci√≥n para analizar la seguridad de una contrase√±a
    function analyzePasswordSecurity() {
      const password = document.getElementById('passwordTestInput').value;
      
      if (!password) {
        alert('Please enter a password to analyze');
        return;
      }

      const analysis = performSecurityAnalysis(password);
      displaySecurityAnalysis(analysis);
      
      // Mostrar el panel de an√°lisis
      const analysisPanel = document.getElementById('securityAnalysis');
      analysisPanel.classList.add('show');
    }

    // Funci√≥n principal de an√°lisis de seguridad
    function performSecurityAnalysis(password) {
      const length = password.length;
      const hasLower = /[a-z]/.test(password);
      const hasUpper = /[A-Z]/.test(password);
      const hasNumbers = /\d/.test(password);
      const hasSymbols = /[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/.test(password);
      
      // Calcular el espacio de caracteres
      let charSpace = 0;
      if (hasLower) charSpace += 26;
      if (hasUpper) charSpace += 26;
      if (hasNumbers) charSpace += 10;
      if (hasSymbols) charSpace += 32;
      
      const entropy = length * Math.log2(charSpace);
      
      // M√©todos de ataque con diferentes velocidades
      const attackMethods = [
        {
          name: "Dictionary Attack",
          icon: "üìö",
          speed: 1000000, // 1M passwords/sec
          description: "Uses common passwords and word lists",
          effectiveness: checkDictionaryVulnerability(password)
        },
        {
          name: "Brute Force (CPU)",
          icon: "üíª",
          speed: 100000000, // 100M attempts/sec
          description: "Systematic checking of all possible combinations",
          effectiveness: 1.0
        },
        {
          name: "Brute Force (GPU)",
          icon: "üéÆ",
          speed: 10000000000, // 10B attempts/sec
          description: "GPU-accelerated brute force attack",
          effectiveness: 1.0
        },
        {
          name: "Rainbow Tables",
          icon: "üåà",
          speed: 1000000000, // 1B lookups/sec
          description: "Pre-computed hash lookup tables",
          effectiveness: checkRainbowTableVulnerability(password)
        },
        {
          name: "Hybrid Attack",
          icon: "üîÄ",
          speed: 50000000, // 50M attempts/sec
          description: "Dictionary words with number/symbol variations",
          effectiveness: checkHybridVulnerability(password)
        },
        {
          name: "Social Engineering",
          icon: "üé≠",
          speed: 1, // Manual process
          description: "Human-based information gathering",
          effectiveness: checkSocialEngineeringVulnerability(password)
        }
      ];

      return {
        password: password,
        length: length,
        charSpace: charSpace,
        entropy: entropy,
        attackMethods: attackMethods.map(method => ({
          ...method,
          timeToBreak: calculateTimeToBreak(charSpace, length, method.speed, method.effectiveness)
        })),
        overallRating: calculateOverallRating(entropy, password)
      };
    }

    // Calcular tiempo para romper la contrase√±a
    function calculateTimeToBreak(charSpace, length, speed, effectiveness) {
      const totalCombinations = Math.pow(charSpace, length);
      const averageAttempts = totalCombinations / 2; // En promedio, se encuentra a la mitad
      const effectiveAttempts = averageAttempts * effectiveness;
      const seconds = effectiveAttempts / speed;
      
      return formatTime(seconds);
    }

    // Formatear tiempo en unidades legibles
    function formatTime(seconds) {
      if (seconds < 1) {
        return { value: "Instant", class: "time-instant", raw: seconds };
      } else if (seconds < 60) {
        return { value: `${Math.round(seconds)} seconds`, class: "time-seconds", raw: seconds };
      } else if (seconds < 3600) {
        return { value: `${Math.round(seconds / 60)} minutes`, class: "time-minutes", raw: seconds };
      } else if (seconds < 86400) {
        return { value: `${Math.round(seconds / 3600)} hours`, class: "time-hours", raw: seconds };
      } else if (seconds < 31536000) {
        return { value: `${Math.round(seconds / 86400)} days`, class: "time-days", raw: seconds };
      } else if (seconds < 31536000000) {
        return { value: `${Math.round(seconds / 31536000)} years`, class: "time-years", raw: seconds };
      } else {
        return { value: `${Math.round(seconds / 3153600000000)} centuries`, class: "time-centuries", raw: seconds };
      }
    }

    // Verificar vulnerabilidad a ataques de diccionario
    function checkDictionaryVulnerability(password) {
      const commonPasswords = [
        'password', '123456', '123456789', 'qwerty', 'abc123', 'password123',
        'admin', 'letmein', 'welcome', 'monkey', '1234567890', 'dragon'
      ];
      
      const lowerPassword = password.toLowerCase();
      
      // Verificar contrase√±as comunes
      if (commonPasswords.includes(lowerPassword)) {
        return 0.001; // Muy vulnerable
      }
      
      // Verificar patrones comunes
      if (/^[a-zA-Z]+\d+$/.test(password) || /^\d+[a-zA-Z]+$/.test(password)) {
        return 0.1; // Vulnerable a ataques h√≠bridos
      }
      
      return 0.8; // Relativamente seguro contra diccionarios
    }

    // Verificar vulnerabilidad a rainbow tables
    function checkRainbowTableVulnerability(password) {
      if (password.length < 8) {
        return 0.1; // Muy vulnerable
      } else if (password.length < 12) {
        return 0.5; // Moderadamente vulnerable
      } else {
        return 0.9; // Relativamente seguro
      }
    }

    // Verificar vulnerabilidad a ataques h√≠bridos
    function checkHybridVulnerability(password) {
      const hasWordPattern = /[a-zA-Z]{3,}/.test(password);
      const hasNumberPattern = /\d+/.test(password);
      
      if (hasWordPattern && hasNumberPattern) {
        return 0.2; // Vulnerable
      }
      
      return 0.7; // Menos vulnerable
    }

    // Verificar vulnerabilidad a ingenier√≠a social
    function checkSocialEngineeringVulnerability(password) {
      const personalPatterns = [
        /\d{4}/, // A√±os
        /\d{2,4}/, // Fechas
        /(love|family|name|birth|year)/i, // Palabras personales
      ];
      
      for (let pattern of personalPatterns) {
        if (pattern.test(password)) {
          return 0.3; // Vulnerable
        }
      }
      
      return 0.8; // Menos vulnerable
    }

    // Calcular calificaci√≥n general
    function calculateOverallRating(entropy, password) {
      let score = 0;
      let rating = "";
      let color = "";
      
      if (entropy < 30) {
        score = 1;
        rating = "CRITICAL";
        color = "#ff0000";
      } else if (entropy < 50) {
        score = 3;
        rating = "WEAK";
        color = "#ff6600";
      } else if (entropy < 70) {
        score = 5;
        rating = "FAIR";
        color = "#ffaa00";
      } else if (entropy < 90) {
        score = 7;
        rating = "GOOD";
        color = "#88ff00";
      } else if (entropy < 120) {
        score = 9;
        rating = "STRONG";
        color = "#00ff00";
      } else {
        score = 10;
        rating = "EXCELLENT";
        color = "#00ffff";
      }
      
      return { score, rating, color, entropy: Math.round(entropy) };
    }

    // Mostrar el an√°lisis de seguridad
    function displaySecurityAnalysis(analysis) {
      const methodsContainer = document.getElementById('attackMethods');
      const ratingScore = document.getElementById('ratingScore');
      const ratingDescription = document.getElementById('ratingDescription');
      
      // Limpiar m√©todos anteriores
      methodsContainer.innerHTML = '';
      
      // Mostrar cada m√©todo de ataque
      analysis.attackMethods.forEach(method => {
        const methodDiv = document.createElement('div');
        methodDiv.className = 'attack-method';
        
        methodDiv.innerHTML = `
          <div class="method-header">
            <span class="method-name">${method.icon} ${method.name}</span>
          </div>
          <div class="time-estimate ${method.timeToBreak.class}">
            Time to break: ${method.timeToBreak.value}
          </div>
          <div class="method-description">${method.description}</div>
        `;
        
        methodsContainer.appendChild(methodDiv);
      });
      
      // Mostrar calificaci√≥n general
      ratingScore.textContent = `${analysis.overallRating.score}/10`;
      ratingScore.style.color = analysis.overallRating.color;
      ratingDescription.textContent = `${analysis.overallRating.rating} (${analysis.overallRating.entropy} bits of entropy)`;
    }

    // Funci√≥n para copiar al portapapeles
    function copyToClipboard() {
      if (!lastGeneratedPassword) {
        return;
      }

      navigator.clipboard.writeText(lastGeneratedPassword).then(() => {
        const output = document.getElementById('password-output');
        const notification = document.getElementById('copyNotification');
        
        output.classList.add('copied');
        notification.classList.add('show');
        
        setTimeout(() => {
          output.classList.remove('copied');
          notification.classList.remove('show');
        }, 2000);
      }).catch(() => {
        // Fallback para navegadores m√°s antiguos
        const textArea = document.createElement('textarea');
        textArea.value = lastGeneratedPassword;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        
        const notification = document.getElementById('copyNotification');
        notification.classList.add('show');
        setTimeout(() => {
          notification.classList.remove('show');
        }, 2000);
      });
    }



    // Funci√≥n del bot√≥n secreto en el build number
    function handleBuildClick() {
      buildClickCount++;
      
      // Reiniciar el contador despu√©s de 3 segundos
      if (buildClickTimer) {
        clearTimeout(buildClickTimer);
      }
      
      buildClickTimer = setTimeout(() => {
        buildClickCount = 0;
      }, 3000);

      // Efecto visual muy sutil (casi imperceptible)
      const buildNumber = document.getElementById('buildNumber');
      buildNumber.style.opacity = '0.8';
      setTimeout(() => {
        buildNumber.style.opacity = '1';
      }, 50);

      // Si se hace clic 4 veces seguidas
      if (buildClickCount === 4) {
        buildClickCount = 0;
        clearTimeout(buildClickTimer);
        
        // Efecto de transici√≥n
        document.body.style.transition = 'opacity 0.5s ease';
        document.body.style.opacity = '0';
        
        setTimeout(() => {
          // Redirigir a la p√°gina confidencial
          window.location.href = '../principal/confidential.html';
        }, 500);
      }
    }

    // Funci√≥n para validar el input de longitud
    function validateLengthInput() {
      const lengthInput = document.getElementById('length');
      let value = parseInt(lengthInput.value);
      
      // Solo intervenir si el valor es mayor a 40
      if (value > 40) {
        lengthInput.value = 40;
        // Efecto visual de advertencia
        lengthInput.style.borderColor = '#ff6666';
        lengthInput.style.boxShadow = '0 0 10px rgba(255, 102, 102, 0.5)';
        setTimeout(() => {
          lengthInput.style.borderColor = '#333';
          lengthInput.style.boxShadow = 'none';
        }, 1000);
      }
      // No validar el m√≠nimo aqu√≠, permitir que el usuario escriba libremente
    }

    // Event listeners
    document.addEventListener('DOMContentLoaded', function() {
      // Solo el build number tiene funcionalidad secreta
      
      // Agregar event listener al build number
      document.getElementById('buildNumber').addEventListener('click', handleBuildClick);
      
      // Agregar event listener para validar el input de longitud (solo cuando se escribe)
      document.getElementById('length').addEventListener('input', validateLengthInput);
      
      // Agregar event listener para Enter en el campo de longitud
      document.getElementById('length').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          generatePassword();
        }
      });

      // Agregar event listener para Enter en el campo de an√°lisis de contrase√±as
      document.getElementById('passwordTestInput').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          analyzePasswordSecurity();
        }
      });

      // Agregar event listener para Enter en el campo oculto
      document.getElementById('hidden-login').addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
          const value = this.value.toLowerCase();
          if (value === 'noxcode2021' || value === 'legacy' || value === 'admin') {
            window.location.href = '../principal/confidential.html';
          } else {
            this.style.borderColor = '#ff0000';
            this.style.boxShadow = '0 0 10px rgba(255, 0, 0, 0.5)';
            setTimeout(() => {
              this.style.borderColor = '#333';
              this.style.boxShadow = 'none';
            }, 1000);
          }
        }
      });

      // Prevenir copiado de textos espec√≠ficos con teclado
      document.addEventListener('keydown', function(e) {
        // Prevenir Ctrl+C, Ctrl+A, Ctrl+X en elementos espec√≠ficos
        if ((e.ctrlKey || e.metaKey) && (e.key === 'c' || e.key === 'a' || e.key === 'x')) {
          const target = e.target;
          const protectedElements = ['H1', 'SPAN'];
          const protectedIds = ['buildNumber'];
          const protectedClasses = ['version-info'];
          
          if (protectedElements.includes(target.tagName) || 
              protectedIds.includes(target.id) ||
              protectedClasses.some(cls => target.classList.contains(cls)) ||
              target.closest('.version-info') ||
              target.closest('h1')) {
            e.preventDefault();
            return false;
          }
        }
      });

      // Prevenir men√∫ contextual en elementos protegidos
      document.addEventListener('contextmenu', function(e) {
        const target = e.target;
        if (target.tagName === 'H1' || 
            target.id === 'buildNumber' ||
            target.closest('.version-info') ||
            target.closest('h1')) {
          e.preventDefault();
          return false;
        }
      });
    });

    // Funci√≥n para simular errores ocasionales (efecto retro)
    setInterval(() => {
      if (Math.random() < 0.05) { // 5% de probabilidad cada 10 segundos
        const container = document.querySelector('.container');
        container.style.transform = 'translateX(2px)';
        setTimeout(() => {
          container.style.transform = 'translateX(-1px)';
          setTimeout(() => {
            container.style.transform = 'translateX(0)';
          }, 50);
        }, 50);
      }
    }, 10000);
  </script>
</body>
</html>
